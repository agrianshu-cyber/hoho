<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For Dravya ‚ù§Ô∏è</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Quicksand:wght@300;400;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    
    <style>
        /* --- CSS VARIABLES --- */
        :root {
            --bg-color: #ffe6ea;
            --env-base: #ffb7c5;      
            --env-side: #ff9eb5;      
            --env-bottom: #ff8da1;    
            --env-top: #ffb7c5;       
        }

        body {
            font-family: 'Quicksand', sans-serif;
            background: linear-gradient(135deg, #fff0f3 0%, #ffe6ea 100%);
            min-height: 100vh;
            overflow-x: hidden; 
            overflow-y: auto;
            margin: 0;
            padding: 0;
            overscroll-behavior: none;
        }

        .main-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
            padding-bottom: 100px; 
        }

        /* --- BACKGROUND HEARTS --- */
        .bg-heart {
            position: absolute;
            color: rgba(255, 126, 179, 0.4);
            animation: float 15s infinite linear;
            z-index: 0;
            pointer-events: none;
        }

        @keyframes float {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 0.8; }
            90% { opacity: 0.8; }
            100% { transform: translateY(-10vh) rotate(360deg); opacity: 0; }
        }

        /* --- ENVELOPE STYLES --- */
        .envelope-wrapper {
            position: relative;
            cursor: pointer;
            transition: transform 0.3s ease;
            margin-top: 50px; 
            z-index: 50; 
        }
        
        .envelope-wrapper:hover {
            transform: scale(1.02);
        }

        .envelope {
            position: relative;
            width: 320px; 
            height: 220px;
            background-color: var(--env-base);
            border-radius: 0 0 10px 10px;
            box-shadow: 0 20px 40px -10px rgba(0,0,0,0.2);
            z-index: 10;
        }

        /* --- FLAPS --- */
        .flap {
            position: absolute;
            width: 0;
            height: 0;
            z-index: 20;
        }

        .flap.front {
            border-left: 160px solid transparent;
            border-right: 160px solid transparent;
            border-bottom: 130px solid var(--env-bottom);
            bottom: 0;
            border-radius: 0 0 10px 10px;
            z-index: 30;
        }

        .flap.top {
            border-left: 160px solid transparent;
            border-right: 160px solid transparent;
            border-top: 140px solid var(--env-top);
            top: 0;
            transform-origin: top;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1), z-index 0.2s;
            z-index: 40;
        }

        .flap.left {
            border-top: 110px solid transparent;
            border-bottom: 110px solid transparent;
            border-left: 160px solid var(--env-side);
            top: 0;
            left: 0;
            height: 100%;
            z-index: 20;
        }
        
        .flap.right {
            border-top: 110px solid transparent;
            border-bottom: 110px solid transparent;
            border-right: 160px solid var(--env-side);
            top: 0;
            right: 0;
            height: 100%;
            z-index: 20;
        }

        /* --- LETTER --- */
        .letter {
            position: absolute;
            top: 10px;
            left: 15px;
            width: 290px;
            height: 200px;
            background: white;
            border-radius: 5px;
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.5s;
            z-index: 15;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            padding: 15px; 
            opacity: 0;
            display: flex;
            flex-direction: column;
        }

        .letter::before {
            content: '';
            position: absolute;
            inset: 0;
            background-image: radial-gradient(#d1d1d1 1px, transparent 1px);
            background-size: 15px 15px;
            opacity: 0.3;
            pointer-events: none;
        }

        /* --- OPEN STATE ANIMATIONS --- */
        .envelope-wrapper.open .flap.top {
            transform: rotateX(180deg);
            z-index: 10;
        }

        .envelope-wrapper.open .letter {
            transform: translateY(-280px) scale(1.1); 
            z-index: 50; 
            opacity: 1;
            height: 480px; 
        }

        /* --- MOBILE ADJUSTMENTS --- */
        @media (max-width: 480px) {
            .envelope-wrapper {
                margin-top: 150px; 
            }

            .envelope-wrapper.open .letter {
                transform: translateY(-220px) scale(1.05);
                height: 450px; 
            }
            
            h1 {
                font-size: 2.5rem !important;
                margin-bottom: 2rem !important;
            }
        }

        /* --- SCROLLBAR STYLING --- */
        #letterBody::-webkit-scrollbar {
            width: 6px;
        }

        #letterBody::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        #letterBody::-webkit-scrollbar-thumb {
            background: #ffb7c5; 
            border-radius: 10px;
        }

        /* --- SEAL --- */
        .seal {
            position: absolute;
            top: 110px;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 40px;
            height: 40px;
            background: #d62828;
            border-radius: 50%;
            z-index: 50;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            font-size: 20px;
            color: white;
            cursor: pointer;
        }
        
        .seal-shimmer { animation: pulse 2s infinite; }

        .envelope-wrapper.open .seal {
            opacity: 0;
            pointer-events: none;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(214, 40, 40, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(214, 40, 40, 0); }
            100% { box-shadow: 0 0 0 0 rgba(214, 40, 40, 0); }
        }

        /* --- UTILS --- */
        .font-fancy { font-family: 'Dancing Script', cursive; }
        .font-body { font-family: 'Quicksand', sans-serif; }
        
        .hidden-content {
            opacity: 0;
            transform: translateY(20px);
            transition: all 1s ease 0.5s;
            height: 100%; 
            display: flex;
            flex-direction: column;
        }
        
        .envelope-wrapper.open .hidden-content {
            opacity: 1;
            transform: translateY(0);
        }

        /* BUTTON WRAPPER - Always Visible Layout */
        .bottom-reveal-wrapper {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-bottom: 20px;
        }

        .btn-group {
            width: 100%;
            padding-top: 10px;
            display: flex;
            justify-content: center; /* Ensures centering */
            align-items: center;
            gap: 15px;
            flex-wrap: wrap; 
            position: relative; /* Context for button movements */
        }

        #noBtn {
            transition: transform 0.1s ease; /* Faster transition for hop */
            z-index: 10;
        }
        
        #yesBtn { z-index: 100; }

        /* VIDEO MODAL STYLES */
        .video-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 9999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease;
            backdrop-filter: blur(5px);
        }

        .video-modal.show {
            opacity: 1;
            pointer-events: all;
        }

        .video-container {
            width: 90%;
            max-width: 800px;
            background: #000;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 0 20px rgba(255, 118, 117, 0.5);
        }

        .close-video {
            margin-top: 15px;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            border: 2px solid white;
            padding: 5px 15px;
            border-radius: 20px;
            transition: background 0.3s;
        }
        
        .close-video:hover {
            background: rgba(255,255,255,0.2);
        }

        /* Buttons hidden initially */
        #revealVideoBtn, #resetBtn {
            display: none; 
            color: white;
            animation: fadeIn 0.5s;
        }
        
        #revealVideoBtn {
            background: linear-gradient(45deg, #ff7eb3, #ff758c);
        }

        #resetBtn {
            background: #a0aec0; /* Cool gray */
            font-size: 0.9rem;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

    </style>
</head>
<body>

    <div id="hearts-bg" class="fixed inset-0 w-full h-full overflow-hidden pointer-events-none"></div>

    <!-- Video Modal (Hidden) -->
    <div id="videoModal" class="video-modal">
        <div class="video-container">
            <video id="surpriseVideo" controls class="w-full h-auto">
                <source src="cats.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        </div>
        <button class="close-video font-body" onclick="closeVideo()">Close Video</button>
    </div>

    <div class="main-container">
        
        <h1 class="font-fancy text-5xl md:text-6xl text-pink-600 mb-8 drop-shadow-sm text-center px-4 pt-10 relative z-1">
            Letter for Dravya
        </h1>

        <!-- Envelope -->
        <div class="envelope-wrapper" id="envelope">
            <div class="envelope">
                <div class="flap left"></div>
                <div class="flap right"></div>
                <div class="flap front"></div>
                
                <div class="flap top">
                    <div class="seal seal-shimmer">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>
                    </div>
                </div>

                <!-- The Letter -->
                <div class="letter text-center">
                    <div class="hidden-content w-full h-full relative">
                        
                        <div class="w-full text-center border-b-2 border-pink-100 pb-2 mb-3 flex-shrink-0">
                            <span class="font-fancy text-3xl text-pink-500">My pretty Dravya,</span>
                        </div>

                        <!-- SCROLLING BODY CONTENT -->
                        <div id="letterBody" class="font-body text-gray-600 text-sm md:text-base leading-relaxed px-2 overflow-y-auto flex-grow w-full text-left">
                            
                            <!-- PHOTO -->
                            <div class="mb-4 relative transform -rotate-2 hover:rotate-0 transition-transform duration-300 text-center">
                                <img src="us.jpg" 
                                     alt="Us" 
                                     class="rounded-lg shadow-md border-4 border-white w-3/4 mx-auto object-cover"
                                     onerror="this.style.display='none'">
                            </div>

                            <p class="mb-3">
                                I still remember‚Ä¶ all the time we‚Äôve spent together. All the small little details that somehow became big for me.
                            </p>
                            
                            <p class="mb-3">
                                From the fact that we literally met on a dating app lol to that one time you sent badi aankh choti aankh and how I couldn‚Äôt stop smiling uske baad..
                            </p>
                            
                            <p class="mb-3">
                                All the pretty snaps you sent me... you don‚Äôt even try, and still you look so pretty and omg tumhari smile.. plus tumahri wo pyariii awaaj damm dravya. You have already taken over all of my attention even the smallest message from you can make my heart beat faster without warning.
                            </p>
                            
                            <p class="mb-3">
                                Honestly, you‚Äôre genuinely the perfect person for me, Dravya. Who wants me to call her malkin lol meri malkin dravya ? Kesi ho :)
                            </p>

                            <p class="mb-3">
                                You are the best thing that has happened to me, and I don‚Äôt ever want to lose you dravya.. It‚Äôs Valentine‚Äôs today and I‚Äôm making this lol I just hope you will like it.
                            </p>

                            <p class="mb-2">
                                Oh haa there is something I wanna ask too...
                            </p>
                            
                            <!-- CENTERED QUESTION -->
                            <p class="font-bold text-pink-500 text-lg md:text-2xl mt-8 mb-4 text-center w-full whitespace-nowrap px-1">
                                Will you be my Valentine?
                            </p>
                            
                            <!-- BUTTONS & FOOTER (Always Visible Now) -->
                            <div class="bottom-reveal-wrapper">
                                <div class="btn-group">
                                    <!-- YES BUTTON -->
                                    <button id="yesBtn" onclick="acceptLove()" 
                                        class="bg-pink-500 hover:bg-pink-600 text-white font-bold py-2 px-6 rounded-full shadow-lg transform transition hover:scale-110 z-20 text-sm md:text-base">
                                        YES! ‚ù§Ô∏è
                                    </button>
                                    
                                    <!-- NO BUTTON (Run Away Logic) -->
                                    <!-- Added 'ontouchstart' for immediate reaction on mobile -->
                                    <!-- Added 'type="button"' to prevent any default submisison behavior -->
                                    <button id="noBtn" type="button" 
                                            ontouchstart="runAway(event, this)" 
                                            onmouseover="runAway(event, this)" 
                                            onclick="runAway(event, this)"
                                        class="bg-gray-200 text-gray-500 font-bold py-2 px-6 rounded-full shadow-md text-sm md:text-base z-10">
                                        No
                                    </button>
                                    
                                    <!-- VIDEO BUTTON (Appears after YES) -->
                                    <button id="revealVideoBtn" onclick="openVideo()"
                                        class="font-bold py-2 px-6 rounded-full shadow-lg z-30 text-sm md:text-base mt-2 text-white">
                                        üé¨ Watch Surprise
                                    </button>

                                    <!-- CLOSE BUTTON (Appears after VIDEO OPEN) -->
                                    <button id="resetBtn" onclick="closeEnvelope()"
                                        class="font-bold py-2 px-4 rounded-full shadow-lg z-30 text-white mt-2 hover:bg-gray-500">
                                        Close Letter üì©
                                    </button>
                                </div>
                                
                                <div class="text-xs text-gray-400 mt-6 font-body text-center">
                                    Forever yours, Anshu
                                </div>
                            </div>
                            
                            <!-- Spacer for easy scrolling -->
                            <div class="h-10"></div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
        
        <p class="mt-16 text-pink-400 font-body text-sm animate-pulse relative z-10" id="hint">Tap the heart to open</p>
    </div>

    <script>
        const envelope = document.getElementById('envelope');
        const hint = document.getElementById('hint');
        const videoModal = document.getElementById('videoModal');
        const surpriseVideo = document.getElementById('surpriseVideo');
        const letterBody = document.getElementById('letterBody');
        let isOpen = false;

        envelope.addEventListener('click', (e) => {
            if (e.target.closest('button') || e.target.closest('.video-modal')) return;
            
            if (!isOpen) {
                envelope.classList.add('open');
                hint.style.opacity = '0';
                isOpen = true;
            }
        });

        // FIXED RUNAWAY FUNCTION
        function runAway(e, btn) {
            // STOP propagation so it doesn't trigger "Yes" or anything else
            e.preventDefault();
            e.stopPropagation();
            
            // Constrain movement to within +/- 60px so it stays visible and "hops"
            // Using relative translation logic
            const range = 60; 
            const newX = (Math.random() - 0.5) * range * 2; 
            const newY = (Math.random() - 0.5) * range * 2;
            
            btn.style.transform = `translate(${newX}px, ${newY}px)`;
            
            const texts = ["No dravya don't press it", "Press yes!", "Try again!", "Don't press!", "Look at Yes!"];
            btn.innerText = texts[Math.floor(Math.random() * texts.length)];
        }

        function acceptLove() {
            const duration = 3000;
            const end = Date.now() + duration;

            // Hide YES/NO
            document.getElementById('yesBtn').style.display = 'none'; 
            document.getElementById('noBtn').style.display = 'none';  
            
            // Show ONLY Video Button
            document.getElementById('revealVideoBtn').style.display = 'inline-block';
            
            (function frame() {
                confetti({ particleCount: 5, angle: 60, spread: 55, origin: { x: 0 }, colors: ['#ff7eb3', '#ff758c', '#ffffff'] });
                confetti({ particleCount: 5, angle: 120, spread: 55, origin: { x: 1 }, colors: ['#ff7eb3', '#ff758c', '#ffffff'] });
                if (Date.now() < end) requestAnimationFrame(frame);
            }());
            
            setTimeout(() => {
                alert("You've made me the happiest person alive! ‚ù§Ô∏è\n\nI have one more surprise for you... click the button below!");
            }, 500);
        }

        function closeEnvelope() {
            envelope.classList.remove('open');
            hint.style.opacity = '1';
            isOpen = false;

            setTimeout(() => {
                document.getElementById('yesBtn').style.display = 'inline-block';
                document.getElementById('noBtn').style.display = 'inline-block';
                // Reset NO button
                document.getElementById('noBtn').style.transform = 'translate(0,0)';
                document.getElementById('noBtn').innerText = 'No';
                
                document.getElementById('revealVideoBtn').style.display = 'none';
                document.getElementById('resetBtn').style.display = 'none';
                
                letterBody.scrollTop = 0;
            }, 600);
        }

        function openVideo() {
            videoModal.classList.add('show');
            surpriseVideo.play();
            
            // SHOW CLOSE BUTTON NOW (Only after video is requested)
            document.getElementById('resetBtn').style.display = 'inline-block';
        }

        function closeVideo() {
            videoModal.classList.remove('show');
            surpriseVideo.pause();
        }

        const heartsContainer = document.getElementById('hearts-bg');
        const symbols = ['‚ù§', 'üíï', 'üòª', '‚ú®', 'üíñ'];
        
        function createHeart() {
            const heart = document.createElement('div');
            heart.classList.add('bg-heart');
            heart.innerHTML = symbols[Math.floor(Math.random() * symbols.length)];
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.fontSize = Math.random() * 20 + 10 + 'px';
            heart.style.animationDuration = Math.random() * 5 + 10 + 's';
            heartsContainer.appendChild(heart);
            setTimeout(() => { heart.remove(); }, 15000);
        }
        setInterval(createHeart, 500);
    </script>
</body>
</html>
